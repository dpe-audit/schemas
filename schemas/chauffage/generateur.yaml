$id: https://schemas.dpe-audit.fr/chauffage/generateur
$schema: https://json-schema.org/draft/2020-12/schema
title: Générateur de chauffage
type: object
unevaluatedProperties: false
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  type:
    title: Type de générateur
    type: string
    enum:
      - chaudiere
      - convecteur_bi_jonction
      - convecteur_electrique
      - cuisiniere
      - foyer_ferme
      - generateur_air_chaud
      - insert
      - pac_air_air
      - pac_air_eau
      - pac_eau_eau
      - pac_eau_glycolee_eau
      - pac_geothermique
      - pac_hybride_air_eau
      - pac_hybride_eau_eau
      - pac_hybride_eau_glycolee_eau
      - pac_hybride_geothermique
      - panneau_rayonnant_electrique
      - plafond_rayonnant_electrique
      - plancher_rayonnant_electrique
      - poele
      - poele_bouilleur
      - radiateur_electrique
      - radiateur_electrique_accumulation
      - radiateur_gaz
      - reseau_chaleur
  energie:
    title: Energie
    type: string
    enum:
      - electricite
      - gaz_naturel
      - gpl
      - fioul
      - charbon
      - bois_buche
      - bois_plaquette
      - bois_granule
      - reseau_chaleur
  energie_partie_chaudiere:
    title: Energie partie chaudière
    type: ["string", "null"]
    default: null
    enum:
      - gaz_naturel
      - gpl
      - fioul
      - charbon
      - bois_buche
      - bois_plaquette
      - bois_granule
      - null
  annee_installation:
    title: Année d'installation
    type: ["integer", "null"]
    default: null
  type_chaudiere:
    title: Type de chaudière
    type: ["string", "null"]
    enum:
      - chaudiere_murale
      - chaudiere_sol
      - null
    default: null
  position:
    $ref: "#/$defs/position"
required:
  - id
  - description
  - type
  - energie
  - annee_installation
  - position
  - signaletique
$defs:
  position:
    title: Position
    type: object
    properties:
      generateur_collectif:
        title: Générateur collectif d'eau chaude sanitaire
        type: boolean
      generateur_multi_batiment:
        title: Générateur multi bâtiment
        type: boolean
      position_volume_chauffe:
        title: Position du générateur à l'intérieur du volume chauffé
        type: boolean
      generateur_mixte_id:
        title: Identifiant du générateur mixte
        type: ["string", "null"]
        format: uuid
        default: null
      reseau_chaleur_id:
        title: Identifiant du réseau de chaleur
        type: ["string", "null"]
        default: null
    required:
      - generateur_collectif
      - generateur_multi_batiment
      - position_volume_chauffe
    oneOf:
      - title: Générateur individuel
        type: object
        properties:
          generateur_collectif:
            const: false
          generateur_multi_batiment:
            const: false
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
        required:
          - generateur_collectif
      - title: Générateur collectif
        type: object
        properties:
          generateur_collectif:
            const: true
          position_volume_chauffe:
            const: false
        required:
          - generateur_collectif
          - position_volume_chauffe
  signaletique:
    title: Fiche signalétique
    type: object
    properties:
      pn:
        title: Puissance nominale en kW
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
      label:
        title: Label du générateur
        type: ["string", "null"]
        enum: [flamme_verte, nf_performance, null]
        default: null
      scop:
        title: Coefficient de performance énergétique saisonnier
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 10
        default: null
      mode_combustion:
        title: Mode de combustion
        type: ["string", "null"]
        enum:
          - standard
          - basse_temperature
          - condensation
          - null
        default: null
      presence_ventouse:
        title: Présence d'une ventouse
        type: ["boolean", "null"]
        default: null
      presence_regulation_combustion:
        title: Présence d'une régulation de combustion
        type: ["boolean", "null"]
        default: null
      pveilleuse:
        title: Puissance de la veilleuse en W
        type: ["number", "null"]
        minimum: 0
        default: null
      qp0:
        title: Pertes à l'arrêt en W
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
      rpn:
        title: Rendement à puissance nominale sur PCI en %
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 150
        default: null
      rpint:
        title: Rendement à puissance intermédiaire sur PCI en %
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 150
        default: null
      tfonc30:
        title: Température de fonctionnement à 30% de la puissance nominale en °C
        type: ["number", "null"]
        minimumExclusive: 0
        maximum: 150
        default: null
      tfonc100:
        title: Température de fonctionnement à 100% de la puissance nominale en °C
        type: ["number", "null"]
        minimumExclusive: 0
        maximum: 150
        default: null
allOf:
  - oneOf:
      - title: Générateur indépendant
        type: object
        properties:
          type:
            enum:
              - convecteur_bi_jonction
              - convecteur_electrique
              - cuisiniere
              - foyer_ferme
              - insert
              - panneau_rayonnant_electrique
              - plafond_rayonnant_electrique
              - plancher_rayonnant_electrique
              - poele
              - radiateur_electrique
              - radiateur_electrique_accumulation
              - radiateur_gaz
          position:
            type: object
            properties:
              generateur_mixte_id:
                const: null
              reseau_chaleur_id:
                const: null
        required:
          - type
          - position
      - title: Générateur mixte
        type: object
        properties:
          type:
            enum:
              - chaudiere
              - generateur_air_chaud
              - pac_air_air
              - pac_air_eau
              - pac_eau_eau
              - pac_eau_glycolee_eau
              - pac_geothermique
              - pac_hybride_air_eau
              - pac_hybride_eau_eau
              - pac_hybride_eau_glycolee_eau
              - pac_hybride_geothermique
              - poele_bouilleur
          position:
            type: object
            properties:
              reseau_chaleur_id:
                const: null
        required:
          - type
          - position
      - title: Réseau de chaleur
        type: object
        properties:
          type:
            const: reseau_chaleur
          position:
            type: object
            properties:
              generateur_collectif:
                const: true
              generateur_multi_batiment:
                const: true
        required:
          - type
          - position
  - oneOf:
      - title: Générateur électrique
        type: object
        properties:
          energie:
            const: electricite
          type:
            enum:
              - chaudiere
              - convecteur_bi_jonction
              - convecteur_electrique
              - generateur_air_chaud
              - panneau_rayonnant_electrique
              - plafond_rayonnant_electrique
              - plancher_rayonnant_electrique
              - radiateur_electrique
              - radiateur_electrique_accumulation
          type_chaudiere:
            const: null
          energie_partie_chaudiere:
            const: null
          signaletique:
            scop:
              const: null
            mode_combustion:
              const: null
            presence_ventouse:
              const: null
            presence_regulation_combustion:
              const: null
            pveilleuse:
              const: null
            qp0:
              const: null
            rpn:
              const: null
            rpint:
              const: null
            tfonc30:
              const: null
            tfonc100:
              const: null
        required:
          - energie
          - type
          - signaletique
      - title: Générateur thermodynamique
        type: object
        properties:
          energie:
            const: electricite
          type:
            enum:
              - pac_air_air
              - pac_air_eau
              - pac_eau_eau
              - pac_eau_glycolee_eau
              - pac_geothermique
          type_chaudiere:
            const: null
          energie_partie_chaudiere:
            const: null
          signaletique:
            type: object
            properties:
              label:
                const: null
              mode_combustion:
                const: null
              presence_ventouse:
                const: null
              presence_regulation_combustion:
                const: null
              pveilleuse:
                const: null
              qp0:
                const: null
              rpn:
                const: null
              rpint:
                const: null
              tfonc30:
                const: null
              tfonc100:
                const: null
        required:
          - energie
          - type
          - signaletique
      - title: Générateur hybride
        type: object
        properties:
          energie:
            const: electricite
          type:
            enum:
              - pac_hybride_air_eau
              - pac_hybride_eau_eau
              - pac_hybride_eau_glycolee_eau
              - pac_hybride_geothermique
          signaletique:
            type: object
            properties:
              label:
                const: null
        required:
          - energie
          - type
          - signaletique
      - title: Générateur à combustion
        type: object
        properties:
          energie:
            enum:
              - gaz_naturel
              - gpl
              - fioul
              - charbon
              - bois_buche
              - bois_plaquette
              - bois_granule
          energie_partie_chaudiere:
            const: null
          signaletique:
            type: object
            properties:
              scop:
                const: null
        required:
          - energie
          - signaletique
      - title: Réseau de chaleur
        type: object
        properties:
          energie:
            const: reseau_chaleur
          energie_partie_chaudiere:
            const: null
          type_chaudiere:
            const: null
          signaletique:
            type: object
            properties:
              pn:
                const: null
              label:
                const: null
              mode_combustion:
                const: null
              presence_ventouse:
                const: null
              presence_regulation_combustion:
                const: null
              pveilleuse:
                const: null
              qp0:
                const: null
              rpn:
                const: null
              rpint:
                const: null
              tfonc30:
                const: null
              tfonc100:
                const: null
        required:
          - energie
          - signaletique
  - oneOf:
      - title: Chaudière à combustion
        type: object
        properties:
          type:
            const: chaudiere
          energie:
            enum:
              - gaz_naturel
              - gpl
              - fioul
              - charbon
              - bois_buche
              - bois_plaquette
              - bois_granule
        required:
          - type
          - energie
      - title: Chaudière électrique
        type: object
        properties:
          type:
            const: chaudiere
          energie:
            const: electricite
        required:
          - type
          - energie
      - title: Pompe à chaleur
        properties:
          type:
            enum:
              - pac_air_air
              - pac_air_eau
              - pac_eau_eau
              - pac_eau_glycolee_eau
              - pac_geothermique
          energie:
            const: electricite
        required:
          - type
          - energie
      - title: Pompe à chaleur hybride
        type: object
        properties:
          type:
            enum:
              - pac_hybride_air_eau
              - pac_hybride_eau_eau
              - pac_hybride_eau_glycolee_eau
              - pac_hybride_geothermique
          energie:
            const: electricite
        required:
          - type
          - energie
      - title: Générateur d'air chaud électrique
        type: object
        properties:
          type:
            const: generateur_air_chaud
          energie:
            const: electricite
        required:
          - type
          - energie
      - title: Générateur d'air chaud à combustion
        type: object
        properties:
          type:
            const: generateur_air_chaud
          energie:
            enum:
              - gaz_naturel
              - gpl
              - fioul
              - charbon
              - bois_buche
              - bois_plaquette
              - bois_granule
        required:
          - type
          - energie
      - title: Poêle bouilleur
        type: object
        properties:
          type:
            const: poele_bouilleur
          energie:
            enum: 
              - bois_buche
              - bois_plaquette
              - bois_granule
        required:
          - type
          - energie
      - title: Poêle et insert
        type: object
        properties:
          type:
            enum:
              - cuisiniere
              - foyer_ferme
              - insert
              - poele
          energie:
            enum:
              - gaz_naturel
              - gpl
              - fioul
              - charbon
              - bois_buche
              - bois_plaquette
              - bois_granule
          signaletique:
            type: object
            properties:
              label:
                enum: [flamme_verte, null]
        required:
          - type
          - energie
          - signaletique
      - title: Radiateur gaz
        type: object
        properties:
          type:
            const: radiateur_gaz
          energie:
            enum: [gaz_naturel, gpl]
          signaletique:
            type: object
            properties:
              label:
                enum: [flamme_verte, null]
        required:
          - type
          - energie
          - signaletique
      - title: Chauffage électrique
        type: object
        properties:
          type:
            enum:
              - convecteur_bi_jonction
              - convecteur_electrique
              - generateur_air_chaud
              - panneau_rayonnant_electrique
              - plafond_rayonnant_electrique
              - plancher_rayonnant_electrique
              - radiateur_electrique
              - radiateur_electrique_accumulation
          energie:
            const: electricite
          signaletique:
            type: object
            properties:
              label:
                enum: [nf_performance, null]
        required:
          - type
          - energie
          - signaletique
      - title: Réseau de chaleur
        type: object
        properties:
          type:
            const: reseau_chaleur
          energie:
            const: reseau_chaleur
        required:
          - type
          - energie
