$id: https://schemas.dpe-audit.fr/chauffage/generateur
$schema: https://json-schema.org/draft/2020-12/schema
title: Générateur de chauffage
type: object
unevaluatedProperties: false
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  type:
    title: Type de générateur
    type: [string, "null"]
    enum:
      - chaudiere
      - convecteur_bi_jonction
      - convecteur_electrique
      - panneau_rayonnant_electrique
      - plafond_rayonnant_electrique
      - plancher_rayonnant_electrique
      - radiateur_electrique
      - radiateur_electrique_accumulation
      - generateur_air_chaud
      - pac_air_air
      - pac_air_eau
      - pac_eau_eau
      - pac_eau_glycolee_eau
      - pac_geothermique
      - cuisiniere
      - foyer_ferme
      - insert
      - poele
      - poele_bouilleur
      - radiateur_gaz
      - reseau_chaleur
      - null
  energie:
    title: Energie
    type: [string, "null"]
    enum:
      - electricite
      - gaz_naturel
      - gpl
      - fioul
      - charbon
      - bois_buche
      - bois_plaquette
      - bois_granule
      - reseau_chaleur
      - null
  bienergie:
    title: Energie secondaire
    type: ["string", "null"]
    default: null
    enum:
      - electricite
      - gaz_naturel
      - gpl
      - fioul
      - charbon
      - bois_buche
      - bois_plaquette
      - bois_granule
      - null
  annee_installation:
    title: Année d'installation
    type: ["integer", "null"]
    default: null
  position:
    $ref: "#/$defs/position"
  signaletique:
    $ref: "#/$defs/signaletique"
  data:
    $ref: "#/$defs/data"
required:
  - id
  - description
  - type
  - energie
  - annee_installation
  - position
  - signaletique
$defs:
  position:
    title: Position
    type: object
    properties:
      position_chaudiere:
        title: Position de la chaudière
        type: [string, "null"]
        enum: [chaudiere_murale, chaudiere_sol, null]
        default: null
      generateur_collectif:
        title: Générateur collectif d'eau chaude sanitaire
        type: boolean
      generateur_multi_batiment:
        title: Générateur multi bâtiment
        type: boolean
      position_volume_chauffe:
        title: Position du générateur à l'intérieur du volume chauffé
        type: boolean
      cascade:
        title: Identifiant de la cascade
        type: [integer, "null"]
        minimum: 0
        default: null
      priorite_cascade:
        title: Ordre de priorité du générateur en cascade
        type: [integer, "null"]
        minimum: 0
        default: null
      generateur_mixte_id:
        title: Identifiant du générateur mixte
        type: ["string", "null"]
        format: uuid
        default: null
      reseau_chaleur_id:
        title: Identifiant du réseau de chaleur
        type: ["string", "null"]
        default: null
    required:
      - generateur_collectif
      - generateur_multi_batiment
      - position_volume_chauffe
    allOf:
      - oneOf:
          - title: Générateur individuel
            type: object
            properties:
              generateur_collectif:
                const: false
              generateur_multi_batiment:
                const: false
              generateur_mixte_id:
                const: null
              reseau_chaleur_id:
                const: null
            required:
              - generateur_collectif
          - title: Générateur collectif
            type: object
            properties:
              generateur_collectif:
                const: true
              position_volume_chauffe:
                const: false
            required:
              - generateur_collectif
              - position_volume_chauffe
      - oneOf:
          - title: Générateur en cascade
            type: object
            properties:
              cascade:
                type: integer
              priorite_cascade:
                type: integer
            required:
              - cascade
              - priorite_cascade
          - title: Autres
            type: object
            properties:
              cascade:
                const: null
              priorite_cascade:
                const: null
  signaletique:
    title: Fiche signalétique
    type: object
    properties:
      pn:
        title: Puissance nominale en kW
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
      label:
        title: Label du générateur
        type: ["string", "null"]
        enum: [flamme_verte, nf_performance, null]
        default: null
      scop:
        title: Coefficient de performance énergétique saisonnier
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 10
        default: null
      mode_combustion:
        title: Mode de combustion
        type: ["string", "null"]
        enum:
          - standard
          - basse_temperature
          - condensation
          - null
        default: null
      presence_ventouse:
        title: Présence d'une ventouse
        type: ["boolean", "null"]
        default: null
      presence_regulation_combustion:
        title: Présence d'une régulation de combustion
        type: ["boolean", "null"]
        default: null
      pveilleuse:
        title: Puissance de la veilleuse en W
        type: ["number", "null"]
        minimum: 0
        default: null
      qp0:
        title: Pertes à l'arrêt en W
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
      rpn:
        title: Rendement à puissance nominale sur PCI en %
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 150
        default: null
      rpint:
        title: Rendement à puissance intermédiaire sur PCI en %
        type: ["number", "null"]
        exclusiveMinimum: 0
        maximum: 150
        default: null
      tfonc30:
        title: Température de fonctionnement à 30% de la puissance nominale en °C
        type: ["number", "null"]
        minimumExclusive: 0
        maximum: 150
        default: null
      tfonc100:
        title: Température de fonctionnement à 100% de la puissance nominale en °C
        type: ["number", "null"]
        minimumExclusive: 0
        maximum: 150
        default: null
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      rdim:
        title: Ratio de dimenstionnement
        type: number
      cef_ch:
        title: Consommation finale de chauffage en kWh/an
        type: number
      cep_ch:
        title: Consommation primaire de chauffage  en kWh/an
        type: number
      eges_ch:
        title: Emissions de gaz à effet de serre de chauffage  en kgCO2/an
        type: number
      pn:
        title: Puissance nominale en kW
        type: number
      pdim:
        title: Puissance de dimensionnement en kW
        type: number
      pch:
        title: Puissance de dimensionnement de chauffage en kW
        type: number
      scop:
        title: Coefficient de performance énergétique saisonnier
        type: [number, "null"]
      rpn:
        title: Rendement à pleine charge exprimée en %PCI
        type: [number, "null"]
      rpint:
        title: Rendement à charge intermédiaire exprimée en %PCI
        type: [number, "null"]
      qp0:
        title: Pertes à l'arrêt en W
        type: [number, "null"]
      pveilleuse:
        title: Puissance de la veilleuse en W
        type: [number, "null"]
      tfonc30:
        title: Température de fonctionnement à 30% de la puissance nominale en °C
        type: [number, "null"]
      tfonc100:
        title: Température de fonctionnement à 100% de la puissance nominale en °C
        type: [number, "null"]
      pertes:
        $ref: "#/$defs/pertes"
  pertes:
    title: Pertes
    type: object
    properties:
      pertes_generation:
        title: Pertes de génération en kWh/an
        type: number
      pertes_generation_recuperables:
        title: Pertes de génération récupérables en kWh/an
        type: number
oneOf:
  - title: Chaudière à combustion
    properties:
      type:
        enum: [chaudiere, poele_bouilleur, generateur_air_chaud]
      energie:
        not:
          enum: [electricite, reseau_chaleur]
      bienergie:
        not:
          const: reseau_chaleur
      position:
        type: object
        properties:
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            const: null
          scop:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Chaudière électrique
    properties:
      type:
        enum: [chaudiere, generateur_air_chaud]
      energie:
        const: electricite
      bienergie:
        const: null
      position:
        type: object
        properties:
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            const: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_ventouse:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Emetteur électrique
    type: object
    properties:
      type:
        enum:
          - generateur_air_chaud
          - convecteur_bi_jonction
          - convecteur_electrique
          - panneau_rayonnant_electrique
          - plafond_rayonnant_electrique
          - plancher_rayonnant_electrique
          - radiateur_electrique
          - radiateur_electrique_accumulation
      energie:
        const: electricite
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          generateur_collectif:
            const: false
          generateur_multi_batiment:
            const: false
          position_volume_chauffe:
            const: true
          cascade:
            const: null
          priorite_cascade:
            const: null
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            title: Label
            type: ["string", "null"]
            enum: [nf_performance, null]
            default: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_ventouse:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Pompe à chaleur
    type: object
    properties:
      type:
        enum:
          - pac_air_air
          - pac_air_eau
          - pac_eau_eau
          - pac_eau_glycolee_eau
          - pac_geothermique
      energie:
        const: electricite
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          cascade:
            const: null
          priorite_cascade:
            const: null
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            const: null
          mode_combustion:
            const: null
          presence_ventouse:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Pompe à chaleur hybride
    properties:
      type:
        enum:
          - pac_air_eau
          - pac_eau_eau
          - pac_eau_glycolee_eau
          - pac_geothermique
      energie:
        const: electricite
      bienergie:
        not:
          enum: [electricite, fioul, charbon, reseau_chaleur, null]
      position:
        type: object
        properties:
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            const: null
    required:
      - type
      - energie
      - bienergie
      - position
      - signaletique
  - title: Poêle / Insert
    properties:
      type:
        enum: [cuisiniere, foyer_ferme, insert, poele]
      energie:
        not:
          enum: [electricite, reseau_chaleur]
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          generateur_collectif:
            const: false
          generateur_multi_batiment:
            const: false
          position_volume_chauffe:
            const: true
          cascade:
            const: null
          priorite_cascade:
            const: null
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            title: Label
            type: ["string", "null"]
            enum: [flamme_verte, null]
            default: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Radiateur à gaz
    type: object
    properties:
      type:
        const: radiateur_gaz
      energie:
        enum: [gaz_naturel, gpl]
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          generateur_collectif:
            const: false
          generateur_multi_batiment:
            const: false
          position_volume_chauffe:
            const: true
          cascade:
            const: null
          priorite_cascade:
            const: null
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          label:
            title: Label
            type: ["string", "null"]
            enum: [flamme_verte, null]
            default: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Réseau de chaleur
    type: object
    properties:
      type:
        const: reseau_chaleur
      energie:
        const: reseau_chaleur
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          generateur_collectif:
            const: true
          generateur_multi_batiment:
            const: true
          position_volume_chauffe:
            const: false
          cascade:
            const: null
          priorite_cascade:
            const: null
          generateur_mixte_id:
            const: null
      signaletique:
        type: object
        properties:
          pn:
            const: null
          label:
            const: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
  - title: Générateur collectif inconnu
    type: object
    properties:
      type:
        const: null
      energie:
        const: null
      bienergie:
        const: null
      position:
        type: object
        properties:
          position_chaudiere:
            const: null
          generateur_collectif:
            const: true
          position_volume_chauffe:
            const: false
          cascade:
            const: null
          priorite_cascade:
            const: null
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
      signaletique:
        type: object
        properties:
          pn:
            const: null
          label:
            const: null
          scop:
            const: null
          mode_combustion:
            const: null
          presence_regulation_combustion:
            const: null
          pveilleuse:
            const: null
          qp0:
            const: null
          rpn:
            const: null
          rpint:
            const: null
          tfonc30:
            const: null
          tfonc100:
            const: null
    required:
      - type
      - energie
      - position
      - signaletique
