$id: https://schemas.dpe-audit.fr/chauffage/generateur/position
$schema: https://json-schema.org/draft/2020-12/schema
title: Position
type: object
properties:
  position_chaudiere:
    title: Position de la chaudière
    type: [string, "null"]
    enum: [chaudiere_murale, chaudiere_sol, null]
    default: null
  generateur_collectif:
    title: Générateur collectif d'eau chaude sanitaire
    type: boolean
  generateur_multi_batiment:
    title: Générateur multi bâtiment
    type: boolean
  position_volume_chauffe:
    title: Position du générateur à l'intérieur du volume chauffé
    type: boolean
  cascade:
    title: Identifiant de la cascade
    type: [integer, "null"]
    minimum: 0
    default: null
  priorite_cascade:
    title: Ordre de priorité du générateur en cascade
    type: [integer, "null"]
    minimum: 0
    default: null
  generateur_mixte_id:
    title: Identifiant du générateur mixte
    type: ["string", "null"]
    format: uuid
    default: null
  reseau_chaleur_id:
    title: Identifiant du réseau de chaleur
    type: ["string", "null"]
    default: null
required:
  - generateur_collectif
  - generateur_multi_batiment
  - position_volume_chauffe
$defs:
  chaudiere_combustion:
    title: Chaudière à combustion
    type: object
    properties:
      reseau_chaleur_id:
        const: null
  chaudiere_electrique:
    title: Chaudière électrique
    type: object
    properties:
      reseau_chaleur_id:
        const: null
  emetteur_electrique:
    title: Emetteur électrique
    type: object
    properties:
      position_chaudiere:
        const: null
      generateur_collectif:
        const: false
      generateur_multi_batiment:
        const: false
      position_volume_chauffe:
        const: true
      cascade:
        const: null
      priorite_cascade:
        const: null
      generateur_mixte_id:
        const: null
      reseau_chaleur_id:
        const: null
  pac:
    title: Pompe à chaleur
    type: object
    properties:
      position_chaudiere:
        const: null
      cascade:
        const: null
      priorite_cascade:
        const: null
      reseau_chaleur_id:
        const: null
  pac_hybride:
    title: Pompe à chaleur hybride
    type: object
    properties:
      reseau_chaleur_id:
        const: null
  poele_insert:
    title: Poêle / Insert
    type: object
    properties:
      position_chaudiere:
        const: null
      generateur_collectif:
        const: false
      generateur_multi_batiment:
        const: false
      position_volume_chauffe:
        const: true
      cascade:
        const: null
      priorite_cascade:
        const: null
      generateur_mixte_id:
        const: null
      reseau_chaleur_id:
        const: null
  radiateur_gaz:
    title: Radiateur à gaz
    type: object
    properties:
      position_chaudiere:
        const: null
      generateur_collectif:
        const: false
      generateur_multi_batiment:
        const: false
      position_volume_chauffe:
        const: true
      cascade:
        const: null
      priorite_cascade:
        const: null
      generateur_mixte_id:
        const: null
      reseau_chaleur_id:
        const: null
  reseau_chaleur:
    title: Réseau de chaleur
    type: object
    properties:
      position_chaudiere:
        const: null
      generateur_collectif:
        const: true
      generateur_multi_batiment:
        const: true
      position_volume_chauffe:
        const: false
      cascade:
        const: null
      priorite_cascade:
        const: null
      generateur_mixte_id:
        const: null
  generateur_collectif_inconnu:
    title: Générateur collectif inconnu
    type: object
    properties:
      position_chaudiere:
        const: null
      generateur_collectif:
        const: true
      position_volume_chauffe:
        const: false
      cascade:
        const: null
      priorite_cascade:
        const: null
      generateur_mixte_id:
        const: null
      reseau_chaleur_id:
        const: null
anyOf:
  - $ref: "#/$defs/chaudiere_combustion"
  - $ref: "#/$defs/chaudiere_electrique"
  - $ref: "#/$defs/emetteur_electrique"
  - $ref: "#/$defs/pac"
  - $ref: "#/$defs/pac_hybride"
  - $ref: "#/$defs/poele_insert"
  - $ref: "#/$defs/radiateur_gaz"
  - $ref: "#/$defs/reseau_chaleur"
  - $ref: "#/$defs/generateur_collectif_inconnu"
allOf:
  - oneOf:
      - title: Générateur individuel
        type: object
        properties:
          generateur_collectif:
            const: false
          generateur_multi_batiment:
            const: false
          generateur_mixte_id:
            const: null
          reseau_chaleur_id:
            const: null
        required:
          - generateur_collectif
      - title: Générateur collectif
        type: object
        properties:
          generateur_collectif:
            const: true
          position_volume_chauffe:
            const: false
        required:
          - generateur_collectif
          - position_volume_chauffe
  - oneOf:
      - title: Générateur en cascade
        type: object
        properties:
          cascade:
            type: integer
          priorite_cascade:
            type: integer
        required:
          - cascade
          - priorite_cascade
      - title: Autres
        type: object
        properties:
          cascade:
            const: null
          priorite_cascade:
            const: null
