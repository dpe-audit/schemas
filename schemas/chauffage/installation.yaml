$id: https://schemas.dpe-audit.fr/chauffage/installation
$schema: https://json-schema.org/draft/2020-12/schema
title: Installation de chauffage
type: object
unevaluatedProperties: false
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  surface:
    title: Surface couverte par l'installation de chauffage en m²
    type: number
    exclusiveMinimum: 0
  comptage_individuel:
    title: Comptage individuel
    type: boolean
  solaire_thermique:
    $ref: "#/$defs/solaire_thermique"
  regulation_centrale:
    $ref: "#/$defs/regulation"
  regulation_terminale:
    $ref: "#/$defs/regulation"
  data:
    $ref: "#/$defs/data"
required:
  - id
  - description
  - surface
  - comptage_individuel
  - solaire_thermique
  - regulation_centrale
  - regulation_terminale
$defs:
  solaire_thermique:
    title: Solaire thermique
    type: ["object", "null"]
    default: null
    properties:
      usage:
        title: Usages couverts par le solaire thermique
        type: string
        enum:
          - chauffage
          - chauffage_ecs
        default: chauffage
      annee_installation:
        title: Année d'installation
        type: ["integer", "null"]
        default: null
      fch:
        title: Facteur de couverture solaire connu et justifié en %
        type: number
        minimum: 0
        maximum: 100
    required:
      - usage
      - annee_installation
      - fch
  regulation:
    title: Régulation
    type: object
    properties:
      presence_regulation:
        title: Présence d'une régulation
        type: boolean
      minimum_temperature:
        title: Régulation avec minimum de température
        type: [boolean, "null"]
        default: null
      detection_presence:
        title: Détection de présence
        type: [boolean, "null"]
        default: null
    required:
      - presence_regulation
    oneOf:
      - title: Régulation
        type: object
        properties:
          presence_regulation:
            const: true
          minimum_temperature:
            type: boolean
          detection_presence:
            type: boolean
        required:
          - presence_regulation
          - minimum_temperature
          - detection_presence
      - title: Pas de régulation
        type: object
        properties:
          presence_regulation:
            const: false
          minimum_temperature:
            const: null
          detection_presence:
            const: null
        required:
          - presence_regulation
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      rdim:
        title: Ratio de dimensionnement
        type: number
      fch:
        title: Facteur de couverture solaire
        type: number
      int:
        title: Facteur d'intermittence
        type: number
      i0:
        title: Coefficient d'intermittence
        type: number
      ich:
        title: Inverse du rendement du système
        type: number
      rd:
        title: Rendement de distribution
        type: number
      re:
        title: Rendement d'émission
        type: number
      rg:
        title: Rendement de génération
        type: number
      rr:
        title: Rendement de régulation
        type: number
