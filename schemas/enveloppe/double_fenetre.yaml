$id: https://schemas.dpe-audit.fr/enveloppe/double_fenetre
$schema: https://json-schema.org/draft/2020-12/schema
title: Double fenêtre
type: object
unevaluatedProperties: false
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  type_baie:
    title: Type de baie
    type: string
    enum:
      - brique_verre_pleine
      - brique_verre_creuse
      - polycarbonate
      - fenetre_battante
      - fenetre_coulissante
      - porte_fenetre_coulissante
      - porte_fenetre_battante
  type_pose:
    title: Type de pose
    type: ["string", "null"]
    enum: [nu_exterieur, nu_interieur, tunnel, null]
    default: null
  materiau:
    title: Matériau
    type: ["string", "null"]
    enum: [pvc, bois, bois_metal, metal, null]
    default: null
  presence_soubassement:
    title: Présence d'un soubassement
    type: [boolean, "null"]
    default: null
  ug:
    title: Coefficient de transmission thermique du vitrage connu et justifié en W/m²K
    type: ["number", "null"]
    exclusiveMinimum: 0
    default: null
  uw:
    title: Coefficient de transmission thermique de la baie connu et justifié en W/m²K
    type: ["number", "null"]
    exclusiveMinimum: 0
    default: null
  sw:
    title: Proportion d'énergie solaire transmise par la baie en %
    type: ["number", "null"]
    minimum: 0
    maximum: 100
    default: null
  vitrage:
    title: Vitrage
    type: [object, "null"]
    default: null
    oneOf:
      - const: null
      - $ref: "#/$defs/vitrage"
  survitrage:
    title: Survitrage
    type: ["object", "null"]
    default: null
    oneOf:
      - $ref: "#/$defs/survitrage"
      - const: "null"
  menuiserie:
    title: Menuiserie
    type: [object, "null"]
    default: null
    oneOf:
      - const: null
      - $ref: "#/$defs/menuiserie"
required:
  - id
  - description
  - type_baie
  - ug
  - uw
  - sw
oneOf:
  - title: Paroi vitrée
    type: object
    properties:
      type_baie:
        enum: [brique_verre_pleine, brique_verre_creuse, polycarbonate]
      type_pose:
        const: null
      materiau:
        const: null
      presence_soubassement:
        const: null
      vitrage:
        const: null
      survitrage:
        const: null
      menuiserie:
        const: null
    required:
      - type_baie
  - title: Fenêtre
    type: object
    properties:
      type_baie:
        enum: [fenetre_battante, fenetre_coulissante]
      type_pose:
        type: string
      presence_soubassement:
        const: null
      vitrage:
        type: object
      menuiserie:
        type: object
    required:
      - type_baie
      - type_pose
      - materiau
      - vitrage
      - menuiserie
  - title: Porte fenêtre
    type: object
    properties:
      type_baie:
        enum: [porte_fenetre_coulissante, porte_fenetre_battante]
      type_pose:
        type: string
      presence_soubassement:
        type: boolean
      vitrage:
        type: object
      menuiserie:
        type: object
    required:
      - type_baie
      - type_pose
      - presence_soubassement
      - vitrage
      - menuiserie
$defs:
  menuiserie:
    title: Menuiserie
    type: object
    properties:
      largeur_dormant:
        title: Largeur dormant en mm
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
      presence_joint:
        title: Présence de joint d'étanchéité
        type: ["boolean", "null"]
        default: null
      presence_retour_isolation:
        title: Présence d'un retour d'isolation
        type: ["boolean", "null"]
        default: null
      presence_rupteur_pont_thermique:
        title: Présence d'un rupteur de pont thermique
        type: ["boolean", "null"]
        default: null
    required:
      - largeur_dormant
      - presence_joint
      - presence_retour_isolation
      - presence_rupteur_pont_thermique
  vitrage:
    title: Vitrage
    type: object
    properties:
      type_vitrage:
        title: Type de vitrage
        type: ["string", "null"]
        enum:
          - simple_vitrage
          - double_vitrage
          - double_vitrage_fe
          - triple_vitrage
          - triple_vitrage_fe
          - null
        default: null
      nature_lame:
        title: Nature de la lame d'air
        type: ["string", "null"]
        enum:
          - air
          - argon
          - krypton
          - null
        default: null
      epaisseur_lame:
        title: Epaisseur de la lame d'air en mm
        type: ["number", "null"]
        exclusiveMinimum: 0
        default: null
    required:
      - type_vitrage
    oneOf:
      - title: Vitrage simple
        properties:
          type_vitrage:
            const: simple_vitrage
          nature_lame:
            const: null
          epaisseur_lame:
            const: null
        required:
          - type_vitrage
      - title: Vitrage complexe
        properties:
          type_vitrage:
            not:
              const: simple_vitrage
        required:
          - type_vitrage
          - nature_lame
          - epaisseur_lame
  survitrage:
    title: Survitrage
    type: object
    properties:
      type_survitrage:
        title: Type de survitrage
        type: ["string", "null"]
        enum:
          - survitrage_simple
          - survitrage_fe
          - null
        default: null
      epaisseur_lame:
        title: Epaisseur de la lame d'air en mm
        type: ["number", "null"]
        minimum: 0
        default: null
    required:
      - type_survitrage
      - epaisseur_lame
