$id: https://schemas.dpe-audit.fr/enveloppe
$schema: https://json-schema.org/draft/2020-12/schema
title: Enveloppe
type: object
properties:
  exposition:
    title: Exposition
    type: string
    enum: [exposition_simple, exposition_multiple]
  q4pa_conv:
    title: Perméabilité à l'air de l'enveloppe sous 4Pa connue et justifiée en m3/(h.m²)
    type: ["number", "null"]
    exclusiveMinimum: 0
    default: null
  presence_brasseurs_air:
    title: Présence de brasseurs d'air
    type: boolean
    default: false
  niveaux:
    title: Liste des niveaux
    type: array
    minItems: 1
    items:
      $ref: /enveloppe/niveau
  locaux_non_chauffes:
    title: Liste des locaux non chauffés
    type: array
    default: []
    items:
      $ref: /enveloppe/local_non_chauffe
  murs:
    title: Liste des murs
    type: array
    minItems: 1
    items:
      $ref: /enveloppe/mur
  planchers_bas:
    title: Liste des planchers bas
    type: array
    default: []
    items:
      $ref: /enveloppe/plancher_bas
  planchers_hauts:
    title: Liste des planchers hauts
    type: array
    default: []
    items:
      $ref: /enveloppe/plancher_haut
  baies:
    title: Liste des baies
    type: array
    default: []
    items:
      $ref: /enveloppe/baie
  portes:
    title: Liste des portes
    type: array
    default: []
    items:
      $ref: /enveloppe/porte
  ponts_thermiques:
    title: Liste des ponts thermiques
    type: array
    default: []
    items:
      $ref: /enveloppe/pont_thermique
  doubles_fenetres:
    title: Liste des doubles fenêtres
    type: array
    default: []
    items:
      $ref: /enveloppe/double_fenetre
  masques:
    title: Liste des masques
    type: array
    default: []
    items:
      $ref: /enveloppe/masque
  data:
    $ref: "#/$defs/data"
required:
  - exposition
  - q4pa_conv
  - presence_brasseurs_air
  - niveaux
  - locaux_non_chauffes
  - murs
  - planchers_bas
  - planchers_hauts
  - baies
  - portes
  - ponts_thermiques
  - doubles_fenetres
  - masques
$defs:
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      inertie:
        title: Inertie
        type: string
        enum: [tres_lourde, lourde, moyenne, legere]
      permeabilite:
        $ref: "#/$defs/permeabilite"
      deperditions:
        $ref: "#/$defs/deperditions"
      confort_ete:
        $ref: "#/$defs/confort_ete"
      apports:
        $ref: "#/$defs/apports"
  deperditions:
    title: Déperditions thermiques
    type: object
    properties:
      gv:
        title: Déperditions thermiques en W/K
        type: number
      dp:
        title: Déperditions thermiques par les parois en W/K
        type: number
      pt:
        title: Déperditions thermiques par les ponts thermiques en W/K
        type: number
      dr:
        title: Déperditions thermiques par renouvellement d'air en W/K
        type: number
      ubat:
        title: Coefficient de transmission thermique de l'enveloppe en W/(m².K)
        type: number
      performance:
        title: Performance
        type: string
        enum: [tres_bonne, bonne, moyenne, insuffisante]
  apports:
    title: Apports gratuits
    type: object
    properties:
      f:
        title: Fraction des besoins de chauffage couverts par les apports gratuits
        type: number
      apport_ch:
        title: Apport pour le chauffage
        type: number
      apport_interne_ch:
        title: Apport interne pour le chauffage
        type: number
      apport_solaire_ch:
        title: Apport solaire pour le chauffage
        type: number
      apport_fr:
        title: Apport pour le refroidissement
        type: number
      apport_interne_fr:
        title: Apport interne pour le refroidissement
        type: number
      apport_solaire_fr:
        title: Apport solaire pour le refroidissement
        type: number
  permeabilite:
    title: Permeabilité
    type: object
    properties:
      hvent:
        title: Déperdition thermique par renouvellement d'air due au système de ventilation en W/K
        type: number
        minimum: 0
      hperm:
        title: Déperdition thermique par renouvellement d'air due au vent en W/K
        type: number
        minimum: 0
      q4pa_conv:
        title: Perméabilité à l'air de l'enveloppe sous 4Pa en m3/(h.m²)
        type: number
        minimum: 0
      presence_joints_menuiserie:
        title: Présence majoritaire de joints au niveau des menuiseries
        type: boolean
  confort_ete:
    title: Confort d'été
    type: object
    properties:
      performance:
        title: Performance
        type: string
        enum: [bon, moyen, insuffisant]
      inertie_lourde:
        title: Inertie lourde
        type: boolean
      isolatoin_plancher_haut:
        title: Isolation des planchers hauts
        type: [boolean, "null"]
      presence_protection_solaire:
        title: Présence de protections solaires
        type: [boolean, "null"]
      logement_traversant:
        title: Logement traversant
        type: [boolean, "null"]
      presence_brasseur_air:
        title: Présence de brasseurs d'air
        type: [boolean, "null"]
