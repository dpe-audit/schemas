$id: https://schemas.dpe-audit.fr/enveloppe/plancher_bas
$schema: https://json-schema.org/draft/2020-12/schema
title: Plancher bas
type: object
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  type_structure:
    title: Type de plancher bas
    type: ["string", "null"]
    enum:
      - plancher_avec_ou_sans_remplissage
      - plancher_entre_solives_metalliques
      - plancher_entre_solives_bois
      - plancher_bois_sur_solives_metalliques
      - bardeaux_et_remplissage
      - voutains_sur_solives_metalliques
      - voutains_briques_ou_moellons
      - dalle_beton
      - plancher_bois_sur_solives_bois
      - plancher_lourd_type_entrevous_terre_cuite_ou_poutrelles_beton
      - plancher_entrevous_isolant
      - null
    default: null
  inertie:
    $ref: /enveloppe/paroi/inertie
  annee_construction:
    title: Année de construction
    type: ["integer", "null"]
    default: null
  annee_renovation:
    title: Année de dernière rénovation connue et justifiée
    type: ["integer", "null"]
    default: null
  u0:
    title: Coefficient de transmission thermique connu et justifié du plancher bas non isolé en W/m²K
    type: ["number", "null"]
    exclusiveMinimum: 0
    default: null
  u:
    title: Coefficient de transmission thermique connu et justifié en W/m²K
    type: ["number", "null"]
    exclusiveMinimum: 0
    default: null
  position:
    $ref: "#/$defs/position"
  isolation:
    $ref: "#/$defs/isolation"
  data:
    $ref: "#/$defs/data"
required:
  - id
  - description
  - type_structure
  - inertie
  - annee_construction
  - annee_renovation
  - u0
  - u
  - position
  - isolation
$defs:
  position:
    title: Position
    type: object
    properties:
      surface:
        title: Surface déperditive exprimée en m²
        type: number
        exclusiveMinimum: 0
      mitoyennete:
        $ref: /enveloppe/paroi/mitoyennete
      local_non_chauffe_id:
        title: Identifiant du local non chauffé associé
        type: [string, "null"]
        format: uuid
        default: null
    required:
      - surface
      - mitoyennete
    oneOf:
      - title: Plancher bas donnant sur un local non chauffé
        type: object
        properties:
          mitoyennete:
            const: local_non_chauffe
          local_non_chauffe_id:
            type: string
        required:
          - local_non_chauffe_id
          - mitoyennete
      - title: Plancher bas donnant sur un vides sanitaire, un sous-sol non chauffé ou un terre-plein
        type: object
        properties:
          mitoyennete:
            enum:
              - enterre
              - vide_sanitaire
              - terre_plein
              - sous_sol_non_chauffe
          surface_ue:
            title: Surface retenue pour le calcul de ue en m²
            type: number
            exclusiveMinimum: 0
          perimetre_ue:
            title: Périmètre retenue pour le calcul de ue en m
            type: number
            exclusiveMinimum: 0
          local_non_chauffe_id:
            const: null
        required:
          - mitoyennete
          - surface_ue
          - perimetre_ue
      - title: Autres cas
        type: object
        properties:
          mitoyennete:
            enum:
              - exterieur
              - local_non_residentiel
              - local_residentiel
              - local_non_accessible
          local_non_chauffe_id:
            const: null
        required:
          - mitoyennete
  isolation:
    $ref: /enveloppe/paroi/isolation
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      u0:
        title: Coefficient de transmission thermique du plancher bas non isolé en W/(m².K)
        type: number
    allOf:
      - $ref: /enveloppe/paroi/data
