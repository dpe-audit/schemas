$id: https://schemas.dpe-audit.fr/enveloppe/plancher_bas/position
$schema: https://json-schema.org/draft/2020-12/schema
title: Position
type: object
properties:
  surface:
    title: Surface déperditive exprimée en m²
    type: number
    exclusiveMinimum: 0
  mitoyennete:
    title: Mitoyenneté
    type: string
    enum:
      - exterieur
      - enterre
      - vide_sanitaire
      - terre_plein
      - sous_sol_non_chauffe
      - local_non_chauffe
      - local_non_residentiel
      - local_residentiel
      - local_non_accessible
  local_non_chauffe_id:
    title: Identifiant du local non chauffé associé
    type: [string, "null"]
    format: uuid
    default: null
required:
  - surface
  - mitoyennete
oneOf:
  - title: Plancher bas donnant sur un local non chauffé
    type: object
    properties:
      mitoyennete:
        const: local_non_chauffe
      local_non_chauffe_id:
        type: string
    required:
      - local_non_chauffe_id
      - mitoyennete
  - title: Plancher bas donnant sur un vides sanitaire, un sous-sol non chauffé ou un terre-plein
    type: object
    properties:
      mitoyennete:
        enum:
          - enterre
          - vide_sanitaire
          - terre_plein
          - sous_sol_non_chauffe
      surface_ue:
        title: Surface retenue pour le calcul de ue en m²
        type: number
        exclusiveMinimum: 0
      perimetre_ue:
        title: Périmètre retenue pour le calcul de ue en m
        type: number
        exclusiveMinimum: 0
      local_non_chauffe_id:
        const: null
    required:
      - mitoyennete
      - surface_ue
      - perimetre_ue
  - title: Autres cas
    type: object
    properties:
      mitoyennete:
        enum:
          - exterieur
          - local_non_residentiel
          - local_residentiel
          - local_non_accessible
      local_non_chauffe_id:
        const: null
    required:
      - mitoyennete
