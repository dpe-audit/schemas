$id: https://schemas.dpe-audit.fr/enveloppe/pont_thermique/liaison
$schema: https://json-schema.org/draft/2020-12/schema
title: Liaison
type: object
unevaluatedProperties: false
properties:
  type:
    title: Type de liaison
    type: string
    enum:
      - plancher_bas_mur
      - plancher_haut_mur
      - refend_mur
      - plancher_intermediaire_mur
      - menuiserie_mur
  pont_thermique_partiel:
    title: Pont thermique partiel
    type: boolean
    default: false
  mur_id:
    title: Identifiant du mur associé au pont thermique au format UUID
    type: string
    format: uuid
  plancher_id:
    title: Identifiant du Plancher haut ou du Plancher bas associé au pont thermique
    type: [string, "null"]
    format: uuid
    default: null
  ouverture_id:
    title: Identifiant de la Baie ou de la Porte associée au pont thermique
    type: [string, "null"]
    format: uuid
    default: null
required:
  - type
  - mur_id
oneOf:
  - title: Pont thermique mur / plancher
    type: object
    properties:
      type:
        enum: [plancher_bas_mur, plancher_haut_mur]
      pont_thermique_partiel:
        const: false
      plancher_id:
        type: string
      ouverture_id:
        const: null
    required:
      - type
      - plancher_id
  - title: Pont thermique mur / menuiserie
    type: object
    properties:
      type:
        const: menuiserie_mur
      pont_thermique_partiel:
        const: false
      ouverture_id:
        type: string
      plancher_id:
        const: null
    required:
      - type
      - ouverture_id
  - title: Pont thermique mur / refend ou plancher intermédiaire
    type: object
    properties:
      type:
        enum: [plancher_intermediaire_mur, refend_mur]
      ouverture_id:
        const: null
      plancher_id:
        const: null
    required:
      - type
      - pont_thermique_partiel
