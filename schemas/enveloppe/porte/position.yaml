$id: https://schemas.dpe-audit.fr/enveloppe/porte/position
$schema: https://json-schema.org/draft/2020-12/schema
title: Position de la porte
type: object
properties:
  paroi_id:
    title: Identifiant de la paroi associée à la porte
    type: ["string", "null"]
    format: uuid
    default: null
  local_non_chauffe_id:
    title: Identifiant du local non chauffé associé à la porte
    type: ["string", "null"]
    format: uuid
    default: null
  surface:
    title: Surface déperditive exprimée en m²
    type: number
    exclusiveMinimum: 0
  mitoyennete:
    title: Mitoyenneté de la porte
    type: string
    enum:
      - exterieur
      - enterre
      - vide_sanitaire
      - terre_plein
      - sous_sol_non_chauffe
      - local_non_chauffe
      - local_non_residentiel
      - local_residentiel
      - local_non_accessible
  orientation:
    title: Orientation de la porte en degré par rapport au nord
    type: ["number", "null"]
    minimum: 0
    exclusiveMaximum: 360
    default: null
  presence_sas:
    title: Présence d'un sas devant la porte
    type: boolean
required:
  - surface
  - mitoyennete
  - orientation
  - presence_sas
oneOf:
  - title: Porte donnant sur un local non chauffé
    type: object
    properties:
      mitoyennete:
        const: local_non_chauffe
      local_non_chauffe_id:
        type: string
    required:
      - local_non_chauffe_id
      - mitoyennete
  - title: Autres cas
    type: object
    properties:
      mitoyennete:
        not:
          const: local_non_chauffe
      local_non_chauffe_id:
        const: null
    required:
      - mitoyennete
