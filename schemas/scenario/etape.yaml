$id: https://schemas.dpe-audit.fr/scenario/etape
$schema: https://json-schema.org/draft/2020-12/schema
title: Etape de travaux
type: object
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
    readOnly: true
  nom:
    title: Nom
    type: string
  description:
    title: Description
    type: string
  enveloppe:
    $ref: /enveloppe
  chauffage:
    $ref: /chauffage
  ecs:
    $ref: /ecs
  ventilation:
    $ref: /ventilation
  refroidissement:
    $ref: /refroidissement
  production:
    $ref: /production
  data:
    $ref: "#/$defs/data"
required:
  - nom
  - description
  - enveloppe
  - chauffage
  - ecs
  - ventilation
  - refroidissement
  - production
$defs:
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      zone_climatique:
        title: Zone climatique
        type: string
        enum: [H1a, H1b, H1c, H2a, H2b, H2c, H2d, H3]
      effet_joule:
        title: Bâtiment chauffé par effet joule
        type: boolean
      parois_anciennes_lourdes:
        title: Bâtiment constitué de parois anciennes lourdes
        type: boolean
      surface_reference:
        title: Surface thermique de référence en m²
        type: number
        minimumExclusive: 0
      volume_reference:
        title: Volume thermique de référence en m³
        type: number
        minimumExclusive: 0
      bilan:
        $ref: "#/$defs/bilan"
      pertes:
        $ref: /common/pertes
      consommations:
        $ref: /common/consommations
  bilan:
    title: Bilan
    type: object
    properties:
      cef:
        title: Consommation d'énergie finale en kWh/m²/an
        type: number
        minimum: 0
      cep:
        title: Consommation d'énergie primaire en kWh/m²/an
        type: number
        minimum: 0
      eges:
        title: Émissions de gaz à effet de serre en kgCO2/m²/an
        type: number
        minimum: 0
      etiquette_energie:
        title: Etiquette énergie
        type: string
        enum: [A, B, C, D, E, F, G]
      etiquette_climat:
        title: Etiquette climat
        type: string
        enum: [A, B, C, D, E, F, G]
