$id: https://schemas.dpe-audit.fr/ventilation/generateur
$schema: https://json-schema.org/draft/2020-12/schema
title: Générateur de ventilation
type: object
unevaluatedProperties: false
properties:
  id:
    title: Identifiant
    type: string
    format: uuid
  description:
    title: Description
    type: string
  type:
    title: Type de générateur
    type: string
    enum:
      - vmc_simple_flux
      - vmc_simple_flux_gaz
      - vmc_basse_pression
      - vmc_double_flux
      - ventilation_hybride
      - ventilation_mecanique
      - puit_climatique
      - vmi
      - vmr
  type_vmc:
    title: Type de Ventilation Mécanique Contrôlée
    type: ["string", "null"]
    enum: [autoreglable, hygroreglable_type_a, hygroreglable_type_b, null]
    default: null
  generateur_collectif:
    title: Générateur collectif de ventilation
    type: boolean
  presence_echangeur_thermique:
    title: Présence d'un échangeur thermique
    type: ["boolean", "null"]
    default: null
  annee_installation:
    title: Année d'installation du générateur de ventilation
    type: ["integer", "null"]
    default: null
  data:
    $ref: "#/$defs/data"
required:
  - id
  - description
  - type
  - generateur_collectif
  - presence_echangeur_thermique
  - annee_installation
oneOf:
  - title: Ventilation Mécanique Contrôlée
    type: object
    properties:
      type:
        enum:
          - vmc_simple_flux
          - vmc_simple_flux_gaz
          - vmc_basse_pression
          - vmc_double_flux
          - ventilation_hybride
    required:
      - type
  - title: Autres
    type: object
    properties:
      type:
        enum:
          - ventilation_mecanique
          - puit_climatique
          - vmi
          - vmr
      type_vmc:
        const: null
    required:
      - type
$defs:
  data:
    title: Données calculées
    type: object
    readOnly: true
    properties:
      rdim:
        title: Ratio de dimensionnement du générateur
        type: number
      ratio_utilisation:
        title: Ratio d'utilisation du mode mécanique du générateur
        type: number
      pvent_moy:
        title: Puissance moyenne des auxiliaires en W
        type: number
      cef_aux:
        title: Consommation d'énergie finale en kWh/an
        type: number
      cep_aux:
        title: Consommation d'énergie primaire en kWh/an
        type: number
      eges_aux:
        title: Emissions de gaz à effet de serre en kgCO2/an
        type: number
